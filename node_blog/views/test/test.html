<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<input type="file" accept="" multiple id="FileList">
<img alt="" id="preview">
<a id='send' href="javascript:;">å‘é€</a>
</body>
<script>

   //åˆ›å»ºä¸€ä¸ªè¡¨å•å¯¹è±¡
   var formData = new FormData() 
        formData.append('username', 'qiansimin');   
        formData.append('age', "14");

    //åˆ›å»ºxhrå¯¹è±¡
   var xhr = new XMLHttpRequest()
   //è®¾ç½®è¯·æ±‚çš„å»¶è¿Ÿæ—¶é—´
   xhr.timeout = 3000
   //è®¾ç½®å“åº”çš„æ–‡æœ¬ç±»å‹  å‘Šè¯‰æœåŠ¡å™¨æˆ‘å¸Œæœ›å¾—åˆ°çš„æ•°æ®ç±»å‹
   //åˆ›å»ºä¸€ä¸ªğŸ˜³å¾…å‘é€çš„æœåŠ¡å™¨è¯·æ±‚ é»˜è®¤æ˜¯true asyncçš„å¼‚æ­¥è¯·æ±‚
   xhr.open('POST', 'xhrrequest', true)
   xhr.responseType = 'text'
   //è®¾ç½®è¯·æ±‚å¤´ è¦å†™åœ¨openæ–¹æ³•çš„åé¢
   xhr.onreadystatechange = function () {
    console.log(xhr.readyState)
    console.log(xhr.status)
    console.log(xhr.statusText)
    console.log('-------------')
    if(xhr.readyState == 4 && xhr.status === 200) {
        // console.log(xhr.responseText)
        console.log(typeof xhr.response)
        console.log(xhr.getResponseHeader('Connection'))
        console.log(xhr.getAllResponseHeaders())

    }
   }

   //è®¾ç½®å„ç§å›è°ƒ
    //å“åº”è¶…æ—¶çš„å›è°ƒ
    xhr.ontimeout = function (e) {
        console.log(e)
    }
    //è¯·æ±‚å¤±è´¥çš„å›è°ƒ
    xhr.onerror = function (e) {
        console.log(e)
    }
    //æ³¨å†Œè¯·æ±‚è¿‡ç¨‹çš„å›è°ƒ
    xhr.upload.onprogress = function (e) {
        console.log(e)   //e.loaded:å·²ç»è½½å…¥çš„æ•°æ®  e.total:æ€»å…±çš„æ•°æ®é‡
    }
    //å‘é€è¯·æ±‚
   xhr.send(formData)


</script>
</html>